<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alien Predictor VIP</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --accent: #00e5ff; --gold: #ffcc00; --bg: #05070a; --card: #11161f; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 15px; text-align: center; }
        
        #menu { display: block; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .card { background: var(--card); padding: 25px 10px; border-radius: 15px; border: 1px solid #222; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; }
        .card:active { transform: scale(0.95); border-color: var(--accent); }

        /* CSS pour les images des jeux */
        .game-img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            margin-bottom: 8px;
        }

        #signal-screen { display: none; animation: fadeIn 0.4s; }
        .main-box { background: var(--card); border: 2px solid var(--accent); border-radius: 25px; padding: 25px 10px; min-height: 300px; display: flex; flex-direction: column; justify-content: center; position: relative; }
        .main-box.is-gold { border-color: var(--gold); box-shadow: 0 0 25px rgba(255, 204, 0, 0.2); }
        
        .signal-type { font-size: 14px; font-weight: 900; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; }
        .type-safe { color: var(--accent); }
        .type-gold { color: var(--gold); }

        .time-interval { font-size: 15px; color: #ffcc00; margin-bottom: 15px; font-weight: bold; background: rgba(255, 204, 0, 0.1); padding: 8px; border-radius: 12px; border: 1px solid rgba(255, 204, 0, 0.3); }

        .range-container { display: flex; flex-direction: column; align-items: center; margin: 10px 0; }
        .range-display { font-size: 45px; font-weight: 900; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .range-sep { color: #444; font-size: 24px; }
        .range-labels { display: flex; justify-content: space-between; width: 180px; font-size: 9px; color: #555; text-transform: uppercase; letter-spacing: 1px; margin-top: 5px; }
        
        .stats-row { display: flex; justify-content: space-around; margin-top: 20px; }
        .stat-item { font-size: 11px; background: rgba(255,255,255,0.05); padding: 6px 12px; border-radius: 8px; }

        .timer-zone { margin-top: 25px; padding-top: 15px; border-top: 1px solid #222; font-size: 12px; color: #888; }
        #countdown { display: block; font-size: 22px; font-weight: bold; margin-top: 5px; color: white; }

        .btn-next { width: 100%; background: var(--accent); color: black; border: none; padding: 18px; border-radius: 15px; font-weight: 900; margin-top: 20px; text-transform: uppercase; cursor: pointer; }
        .btn-next:disabled { background: #222; color: #555; cursor: not-allowed; }

        .bar-bg { width: 80%; height: 6px; background: #222; border-radius: 10px; margin: 15px auto; }
        .bar-fill { height: 100%; width: 0%; background: var(--accent); border-radius: 10px; transition: 1.5s; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <!-- MENU AVEC IMAGES INT√âGR√âES -->
    <div id="menu">
        <h1 style="font-size: 22px; letter-spacing: 2px;">ALIEN <span style="color:var(--accent)">PREDICTOR</span></h1>
        <div class="grid">
            <div class="card" onclick="openSignal('LUCKY JET')">
                <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/luckyjet.png" class="game-img">
                <span>Lucky Jet</span>
            </div>

            <div class="card" onclick="openSignal('AVIATOR')">
                <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviator.png" class="game-img">
                <span>Aviator</span>
            </div>

            <div class="card" onclick="openSignal('ROCKET QUEEN')">
                <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/rocketqueen.png" class="game-img">
                <span>Rocket Queen</span>
            </div>

            <div class="card" onclick="openSignal('AVIATRIX')">
                <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviatrix.png" class="game-img">
                <span>Aviatrix</span>
            </div>
        </div>
    </div>

    <div id="signal-screen">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <button onclick="goBack()" style="background:none; border:none; color:#666; font-weight:bold; cursor:pointer;">‚Üê MENU</button>
            <span id="game-title" style="color:var(--accent); font-weight:900;">GAME</span>
        </div>

        <div class="main-box" id="box-style">
            <div id="loading-view">
                <p style="font-size:12px; letter-spacing:1px;">ANALYSE DES FLUX...</p>
                <div class="bar-bg"><div class="bar-fill" id="progress"></div></div>
            </div>

            <div id="result-view" style="display:none;">
                <div id="signal-tag" class="signal-type">SIGNAL</div>
                <div class="time-interval" id="play-time">HEURE DE JEU : --:--</div>
                
                <div class="range-container">
                    <div class="range-display">
                        <span id="val-min">0x</span><span class="range-sep">‚Äî</span><span id="val-max">0x</span>
                    </div>
                    <div class="range-labels">
                        <span>Minima</span>
                        <span>Objectif</span>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat-item">PR√âCISION: <span id="perc">--</span>%</div>
                    <div class="stat-item">ID: #<span id="sig-id">000</span></div>
                </div>

                <div class="timer-zone">
                    PROCHAIN SIGNAL DANS
                    <span id="countdown">00:00</span>
                </div>
            </div>
        </div>
        <button class="btn-next" id="nextBtn" onclick="generateNew()">OBTENIR UN SIGNAL</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        let timerInterval;
        let currentGame = "";

        function openSignal(name) {
            currentGame = name;
            document.getElementById('menu').style.display = 'none';
            document.getElementById('signal-screen').style.display = 'block';
            document.getElementById('game-title').innerText = name;
            
            const saved = localStorage.getItem('signal_' + name);
            if (saved) {
                const data = JSON.parse(saved);
                const now = new Date().getTime();
                if (now < data.expiry) {
                    displaySavedSignal(data);
                    return;
                }
            }
            generateNew();
        }

        function generateNew() {
            const btn = document.getElementById('nextBtn');
            btn.disabled = true;
            document.getElementById('loading-view').style.display = 'block';
            document.getElementById('result-view').style.display = 'none';
            document.getElementById('progress').style.width = '0%';
            setTimeout(() => { document.getElementById('progress').style.width = '100%'; }, 100);

            setTimeout(() => {
                const now = new Date();
                
                const jump = Math.random() > 0.5 ? 2 : 3; 
                const startT = new Date(now.getTime() + jump * 60000);
                const endT = new Date(now.getTime() + (jump + 1) * 60000);
                
                const waitTime = Math.floor(Math.random() * (180 - 120 + 1) + 120);
                
                const isGold = Math.random() > 0.8;
                let precision, c1, c2;

                if (isGold) {
                    c1 = (Math.random() * (9-6)+6);
                    c2 = (Math.random() * (20-10)+10);
                    precision = Math.floor(Math.random() * (88 - 76 + 1) + 76);
                } else {
                    c1 = (Math.random() * (2.5-2.0)+2.0);
                    c2 = (Math.random() * (5.0-3.0)+3.0);
                    precision = Math.floor(Math.random() * (98 - 80 + 1) + 80);
                }

                const finalMin = Math.min(c1, c2).toFixed(1);
                const finalMax = Math.max(c1, c2).toFixed(1);

                const signalData = {
                    isGold: isGold,
                    min: finalMin,
                    max: finalMax,
                    timeStr: formatTime(startT) + " ‚Äî " + formatTime(endT),
                    perc: precision,
                    id: Math.floor(Math.random() * 899+100),
                    expiry: new Date().getTime() + (waitTime * 1000)
                };

                localStorage.setItem('signal_' + currentGame, JSON.stringify(signalData));
                displaySavedSignal(signalData);
                if(tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
            }, 1800);
        }

        function displaySavedSignal(data) {
            document.getElementById('loading-view').style.display = 'none';
            document.getElementById('result-view').style.display = 'block';
            
            const box = document.getElementById('box-style');
            const tag = document.getElementById('signal-tag');
            
            if (data.isGold) {
                tag.innerText = "‚≠ê SIGNAL GOLD ‚≠ê"; tag.className = "signal-type type-gold";
                box.classList.add('is-gold');
                document.getElementById('val-min').style.color = "var(--gold)";
                document.getElementById('val-max').style.color = "var(--gold)";
            } else {
                tag.innerText = "üõ°Ô∏è SIGNAL SAFE üõ°Ô∏è"; tag.className = "signal-type type-safe";
                box.classList.remove('is-gold');
                document.getElementById('val-min').style.color = "white";
                document.getElementById('val-max').style.color = "white";
            }

            document.getElementById('val-min').innerText = data.min + "X";
            document.getElementById('val-max').innerText = data.max + "X";
            document.getElementById('play-time').innerText = "üïí HEURE DE JEU : " + data.timeStr;
            document.getElementById('perc').innerText = data.perc;
            document.getElementById('sig-id').innerText = data.id;

            const remaining = Math.round((data.expiry - new Date().getTime()) / 1000);
            startTimer(remaining);
        }

        function startTimer(duration) {
            clearInterval(timerInterval);
            const display = document.getElementById('countdown');
            const btn = document.getElementById('nextBtn');
            btn.disabled = true;

            function update() {
                const now = new Date().getTime();
                const saved = JSON.parse(localStorage.getItem('signal_' + currentGame));
                if(!saved) return;
                const diff = Math.round((saved.expiry - now) / 1000);

                if (diff <= 0) {
                    clearInterval(timerInterval);
                    display.textContent = "SIGNAL PR√äT !";
                    btn.disabled = false;
                } else {
                    let m = parseInt(diff / 60, 10);
                    let s = parseInt(diff % 60, 10);
                    display.textContent = (m<10?"0"+m:m) + ":" + (s<10?"0"+s:s);
                }
            }
            update();
            timerInterval = setInterval(update, 1000);
        }

        function formatTime(date) {
            return date.getHours().toString().padStart(2, '0') + ":" + date.getMinutes().toString().padStart(2, '0');
        }

        function goBack() {
            document.getElementById('menu').style.display = 'block';
            document.getElementById('signal-screen').style.display = 'none';
            clearInterval(timerInterval);
        }
    </script>
</body>
    </html>
