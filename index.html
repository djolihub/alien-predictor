<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alien Predictor VIP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
background:#05070a;
color:white;
font-family:Segoe UI;
text-align:center;
padding:15px;
}

.grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:12px;
margin-top:20px;
}

.card{
background:#11161f;
padding:20px;
border-radius:15px;
cursor:pointer;
}

#signal-screen{display:none;}

.main-box{
background:#11161f;
border:2px solid #00e5ff;
border-radius:20px;
padding:25px;
margin-top:20px;
}

.range{font-size:35px;font-weight:bold;margin:15px 0;}
#countdown{font-size:22px;margin-top:10px;}

.btn{
background:#00e5ff;
border:none;
padding:15px;
border-radius:12px;
font-weight:bold;
width:100%;
margin-top:20px;
}
.btn:disabled{background:#333;color:#777;}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu">
<h2>ALIEN PREDICTOR</h2>
<div class="grid">
<div class="card" onclick="openGame('LUCKY JET')">Lucky Jet</div>
<div class="card" onclick="openGame('AVIATOR')">Aviator</div>
<div class="card" onclick="openGame('ROCKET QUEEN')">Rocket Queen</div>
<div class="card" onclick="openGame('AVIATRIX')">Aviatrix</div>
</div>
</div>

<!-- SIGNAL -->
<div id="signal-screen">
<button onclick="backMenu()">← MENU</button>
<h2 id="game-title"></h2>

<div class="main-box">
<div id="type">SIGNAL</div>
<div class="range"><span id="min">0X</span> - <span id="max">0X</span></div>
<div id="time">Heure : --:--</div>
<div id="precision">Précision : --%</div>
<div id="countdown">--:--</div>
</div>

<button id="btn" class="btn" onclick="getSignal()">OBTENIR UN SIGNAL</button>
</div>

<script>
let currentGame="";
let timer;

function openGame(game){
currentGame=game;
menu.style.display="none";
signal-screen.style.display="block";
game-title.innerText=game;
loadSavedSignal();
}

function backMenu(){
signal-screen.style.display="none";
menu.style.display="block";
clearInterval(timer);
}

function random(min,max){
return (Math.random()*(max-min)+min).toFixed(1);
}

function generateSignal(){
let now=new Date();
let playTime=new Date(now.getTime()+120000); // +2 min

return{
type:Math.random()<0.8?"SAFE":"GOLD",
min:random(2,4),
max:random(5,12),
precision:Math.floor(Math.random()*10+90),
play:playTime.getHours().toString().padStart(2,'0')+":"+
playTime.getMinutes().toString().padStart(2,'0'),
expiry:now.getTime()+120000
}
}

function getSignal(){
let saved=JSON.parse(localStorage.getItem(currentGame));
if(saved && Date.now()<saved.expiry) return;

let signal=generateSignal();
localStorage.setItem(currentGame,JSON.stringify(signal));
displaySignal(signal);
}

function loadSavedSignal(){
let saved=JSON.parse(localStorage.getItem(currentGame));
if(saved && Date.now()<saved.expiry){
displaySignal(saved);
}else{
resetDisplay();
}
}

function displaySignal(s){
type.innerText="SIGNAL "+s.type;
min.innerText=s.min+"X";
max.innerText=s.max+"X";
time.innerText="Entrer à : "+s.play;
precision.innerText="Précision : "+s.precision+"%";
startCooldown(s.expiry);
}

function startCooldown(expiry){
clearInterval(timer);
btn.disabled=true;

timer=setInterval(()=>{
let diff=Math.floor((expiry-Date.now())/1000);
if(diff<=0){
countdown.innerText="Signal prêt";
btn.disabled=false;
clearInterval(timer);
return;
}
let m=Math.floor(diff/60);
let s=diff%60;
countdown.innerText=m+":"+s.toString().padStart(2,'0');
},1000);
}

function resetDisplay(){
type.innerText="SIGNAL";
min.innerText="0X";
max.innerText="0X";
time.innerText="Heure : --:--";
precision.innerText="Précision : --%";
countdown.innerText="--:--";
btn.disabled=false;
}
</script>
</body>
</html>
