<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Alien Predictor VIP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root {
    --accent: #00e5ff;
    --gold: #ffcc00;
    --bg: #05070a;
    --card: #11161f;
}
body {
    background: var(--bg);
    color: white;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 15px;
    text-align: center;
}

/* Menu */
#menu { display: block; }
.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 20px;
}
.card {
    background: var(--card);
    padding: 20px 10px;
    border-radius: 15px;
    border: 1px solid #222;
    cursor: pointer;
    transition: 0.2s;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.card:active { transform: scale(0.95); border-color: var(--accent); }

.game-img {
    width: 90px;
    height: 90px;
    object-fit: contain;
    margin-bottom: 10px;
}

/* Signal Screen */
#signal-screen { display: none; animation: fadeIn 0.4s; }
.main-box {
    background: var(--card);
    border: 2px solid var(--accent);
    border-radius: 25px;
    padding: 25px 10px;
    min-height: 300px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.main-box.is-gold { border-color: var(--gold); box-shadow: 0 0 25px rgba(255,204,0,0.2); }

.signal-type { font-size: 16px; font-weight: 900; margin-bottom: 10px; }
.type-safe { color: var(--accent); }
.type-gold { color: var(--gold); }

.range-display { font-size: 40px; font-weight: 900; margin: 10px 0; }
.timer-zone { margin-top: 20px; font-size: 14px; color: #888; }
#countdown { font-size: 24px; color: white; font-weight: bold; }

.btn-next {
    width: 100%;
    background: var(--accent);
    color: black;
    border: none;
    padding: 18px;
    border-radius: 15px;
    font-weight: 900;
    margin-top: 20px;
    cursor: pointer;
}
.btn-next:disabled { background: #222; color: #555; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
</style>
</head>

<body>

<!-- MENU -->
<div id="menu">
    <h1>ALIEN <span style="color:var(--accent)">PREDICTOR</span></h1>
    <div class="grid">
        <div class="card" onclick="openSignal('LUCKY JET')">
            <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/luckyjet.png" class="game-img">
            <span>Lucky Jet</span>
        </div>
        <div class="card" onclick="openSignal('AVIATOR')">
            <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviator.png" class="game-img">
            <span>Aviator</span>
        </div>
        <div class="card" onclick="openSignal('ROCKET QUEEN')">
            <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/rocketqueen.png" class="game-img">
            <span>Rocket Queen</span>
        </div>
        <div class="card" onclick="openSignal('AVIATRIX')">
            <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviatrix.png" class="game-img">
            <span>Aviatrix</span>
        </div>
    </div>
</div>

<!-- SIGNAL SCREEN -->
<div id="signal-screen">
    <button onclick="goBack()">‚Üê MENU</button>
    <h2 id="game-title" style="margin-top:10px;">GAME</h2>

    <div class="main-box" id="box-style">
        <div id="signal-tag" class="signal-type type-safe">SIGNAL</div>
        <div class="range-display"><span id="val-min">0X</span> ‚Äî <span id="val-max">0X</span></div>
        <div class="timer-zone">Prochain signal dans <span id="countdown">--:--</span></div>
    </div>

    <button class="btn-next" id="nextBtn" onclick="generateNew()">OBTENIR UN SIGNAL</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let timerInterval;
let currentGame = "";

// Ouvrir un jeu
function openSignal(name) {
    currentGame = name;
    document.getElementById('menu').style.display = 'none';
    document.getElementById('signal-screen').style.display = 'block';
    document.getElementById('game-title').innerText = name;

    // Charger le signal existant si cooldown pas termin√©
    const saved = JSON.parse(localStorage.getItem('signal_' + name));
    if(saved) {
        const now = new Date().getTime();
        if(now < saved.expiry) {
            displaySavedSignal(saved);
        } else {
            resetDisplay();
        }
    } else {
        resetDisplay();
    }
}

// R√©initialiser l'affichage sans g√©n√©rer de signal
function resetDisplay() {
    document.getElementById('val-min').innerText = "0X";
    document.getElementById('val-max').innerText = "0X";
    document.getElementById('signal-tag').innerText = "SIGNAL";
    document.getElementById('signal-tag').className = "signal-type type-safe";
    document.getElementById('countdown').innerText = "--:--";
    clearInterval(timerInterval);
}

// G√©n√©rer un signal
function generateNew() {
    const now = new Date().getTime();
    let saved = JSON.parse(localStorage.getItem('signal_' + currentGame));
    if(saved && now < saved.expiry) return; // Respect du cooldown

    // D√©terminer cooldown minimum 2 minutes
    const waitTime = 120; // secondes
    const expiryTime = now + waitTime * 1000;

    // G√©n√©rer signal al√©atoire selon type
    const isGold = Math.random() > 0.8;
    let minVal, maxVal, precision;
    switch(currentGame) {
        case "LUCKY JET":
            minVal = (Math.random()*3+2).toFixed(1);
            maxVal = (Math.random()*7+5).toFixed(1);
            break;
        case "AVIATOR":
            minVal = (Math.random()*2+1).toFixed(1);
            maxVal = (Math.random()*6+4).toFixed(1);
            break;
        case "ROCKET QUEEN":
            minVal = (Math.random()*4+3).toFixed(1);
            maxVal = (Math.random()*10+7).toFixed(1);
            break;
        case "AVIATRIX":
            minVal = (Math.random()*1+2).toFixed(1);
            maxVal = (Math.random()*5+3).toFixed(1);
            break;
    }
    precision = Math.floor(Math.random() * (98-80+1)+80);

    const signalData = {
        isGold: isGold,
        min: minVal,
        max: maxVal,
        perc: precision,
        expiry: expiryTime
    };

    localStorage.setItem('signal_' + currentGame, JSON.stringify(signalData));
    displaySavedSignal(signalData);
}

// Afficher signal sauvegard√©
function displaySavedSignal(data) {
    document.getElementById('val-min').innerText = data.min + "X";
    document.getElementById('val-max').innerText = data.max + "X";
    document.getElementById('signal-tag').innerText = data.isGold ? "‚≠ê SIGNAL GOLD ‚≠ê" : "üõ°Ô∏è SIGNAL SAFE üõ°Ô∏è";
    document.getElementById('signal-tag').className = data.isGold ? "signal-type type-gold" : "signal-type type-safe";
    startTimer(Math.round((data.expiry - new Date().getTime())/1000));
}

// Timer de cooldown
function startTimer(duration) {
    clearInterval(timerInterval);
    const display = document.getElementById('countdown');
    const btn = document.getElementById('nextBtn');
    btn.disabled = true;

    function update() {
        const saved = JSON.parse(localStorage.getItem('signal_' + currentGame));
        if(!saved) return;
        let diff = Math.round((saved.expiry - new Date().getTime())/1000);
        if(diff <= 0) {
            clearInterval(timerInterval);
            display.textContent = "SIGNAL PR√äT !";
            btn.disabled = false;
        } else {
            let m = Math.floor(diff/60);
            let s = diff % 60;
            display.textContent = (m<10?"0"+m:m) + ":" + (s<10?"0"+s:s);
            btn.disabled = true;
        }
    }

    update();
    timerInterval = setInterval(update, 1000);
}

// Bouton retour au menu
function goBack() {
    document.getElementById('menu').style.display = 'block';
    document.getElementById('signal-screen').style.display = 'none';
    clearInterval(timerInterval);
}
</script>

</body>
    </html>
