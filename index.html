<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Alien Predictor VIP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root { --bg:#05070a; --card:#11161f; }
body { background:var(--bg); color:white; font-family:'Segoe UI',sans-serif; margin:0; padding:15px; text-align:center; }

.grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:20px; }
.card { background:var(--card); padding:20px 10px; border-radius:15px; border:1px solid #222; cursor:pointer; display:flex; flex-direction:column; align-items:center;}
.game-img { width:90px; height:90px; object-fit:contain; margin-bottom:10px; }

#signal-screen { display:none; }

.main-box { background:var(--card); border:3px solid #fff; border-radius:30px; padding:25px; min-height:350px; display:flex; flex-direction:column; justify-content:center; align-items:center; }
.main-box.gold { border-color:gold; box-shadow:0 0 25px rgba(255,204,0,0.6); }

.range-display { font-size:50px; font-weight:900; }
.btn-next { width:90%; border:none; padding:18px; border-radius:25px; font-weight:900; margin-top:20px; cursor:pointer; }
.btn-next:disabled { background:#222; color:#555; }
</style>
</head>

<body>

<div id="menu">
<h1>ALIEN <span style="color:#00e5ff">PREDICTOR</span></h1>
<div class="grid">
<div class="card" onclick="openSignal('LUCKY JET')"><img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/luckyjet.png" class="game-img"><span>Lucky Jet</span></div>
<div class="card" onclick="openSignal('AVIATOR')"><img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviator.png" class="game-img"><span>Aviator</span></div>
<div class="card" onclick="openSignal('ROCKET QUEEN')"><img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/rocketqueen.png" class="game-img"><span>Rocket Queen</span></div>
<div class="card" onclick="openSignal('AVIATRIX')"><img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviatrix.png" class="game-img"><span>Aviatrix</span></div>
</div>
</div>

<div id="signal-screen">
<button onclick="goBack()">‚Üê MENU</button>
<h2 id="game-title"></h2>

<div class="main-box" id="box-style">
<div id="play-time">HEURE DE JEU : --:--</div>
<div class="range-display"><span id="val-min">0X</span> ‚Äî <span id="val-max">0X</span></div>
<div>PR√âCISION <span id="perc">--</span>% | ID #<span id="sig-id">000</span></div>
<div>PROCHAIN SIGNAL : <span id="countdown">--:--</span></div>
</div>

<button class="btn-next" id="nextBtn" onclick="generateNew()">OBTENIR UN SIGNAL</button>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();

let currentGame="";
let timers={}; // üî• timers ind√©pendants par jeu

function openSignal(name){
    currentGame=name;
    document.getElementById('menu').style.display='none';
    document.getElementById('signal-screen').style.display='block';
    document.getElementById('game-title').innerText=name;

    const saved = JSON.parse(localStorage.getItem('signal_'+name));
    if(saved) displaySavedSignal(saved);
}

function generateNew(){
    const now=Date.now();
    const saved=JSON.parse(localStorage.getItem('signal_'+currentGame));
    if(saved && now<saved.expiry){ displaySavedSignal(saved); return;}

    const min=(Math.random()*2+2).toFixed(1);
    const max=(Math.random()*10+5).toFixed(1);
    const perc=Math.floor(Math.random()*19+80);
    const id=Math.floor(Math.random()*900+100);

    const start=new Date(now+120000);
    const end=new Date(now+180000);

    const data={min,max,perc,id,start:start.getTime(),end:end.getTime(),expiry:now+120000};
    localStorage.setItem('signal_'+currentGame,JSON.stringify(data));
    displaySavedSignal(data);
}

function displaySavedSignal(data){
    document.getElementById('val-min').innerText=data.min+"X";
    document.getElementById('val-max').innerText=data.max+"X";
    document.getElementById('perc').innerText=data.perc;
    document.getElementById('sig-id').innerText=data.id;

    const start=new Date(data.start);
    const end=new Date(data.end);
    document.getElementById('play-time').innerText="HEURE DE JEU : "+formatTime(start)+" ‚Äî "+formatTime(end);

    startTimer(currentGame, Math.max(0,Math.floor((data.expiry-Date.now())/1000)));
}

function startTimer(game,duration){
    clearInterval(timers[game]);
    const display=document.getElementById('countdown');
    const btn=document.getElementById('nextBtn');

    function update(){
        if(currentGame!==game) return; // üî• prot√®ge les autres jeux
        if(duration<=0){ display.textContent="SIGNAL PR√äT"; btn.disabled=false; return;}
        let m=Math.floor(duration/60), s=duration%60;
        display.textContent=(m<10?"0"+m:m)+":"+(s<10?"0"+s:s);
        duration--;
    }
    btn.disabled=true;
    update();
    timers[game]=setInterval(update,1000);
}

function formatTime(d){ return d.getHours().toString().padStart(2,'0')+":"+d.getMinutes().toString().padStart(2,'0'); }

function goBack(){
    document.getElementById('menu').style.display='block';
    document.getElementById('signal-screen').style.display='none';
}
</script>
</body>
</html>
