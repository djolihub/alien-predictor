<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Alien Predictor VIP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root { --bg:#05070a; --card:#11161f; }
body {
    background:var(--bg);
    color:white;
    font-family:'Segoe UI',sans-serif;
    margin:0;
    padding:15px;
    text-align:center;
}

.grid {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
    margin-top:20px;
}

.card {
    background:var(--card);
    padding:20px 10px;
    border-radius:15px;
    border:1px solid #222;
    cursor:pointer;
    display:flex;
    flex-direction:column;
    align-items:center;
}

.card:active { transform:scale(0.95); }

.game-img {
    width:90px;
    height:90px;
    object-fit:contain;
    margin-bottom:10px;
}

#signal-screen { display:none; }

.main-box {
    background:var(--card);
    border:3px solid #fff;
    border-radius:30px;
    padding:25px 15px;
    min-height:350px;
    display:flex;
    flex-direction:column;
    justify-content:flex-start;
    align-items:center;
    box-shadow:0 0 15px rgba(255,255,255,0.1);
}

.main-box.gold {
    border-color:gold;
    box-shadow:0 0 25px rgba(255,204,0,0.6);
}

/* Heure de jeu en haut */
.play-zone{
    background:rgba(255,255,255,0.05);
    border:1px solid rgba(255,255,255,0.1);
    padding:12px 18px;
    border-radius:18px;
    margin-bottom:20px;
    width:100%;
    text-align:center;
}

.play-label{
    font-size:12px;
    letter-spacing:1px;
    color:#aaa;
}

.play-time{
    font-size:20px;
    font-weight:900;
    margin-top:3px;
}

.range-display {
    font-size:50px;
    font-weight:900;
    margin-bottom:20px;
}

.stats-zone{
    display:flex;
    justify-content:space-between;
    width:100%;
    gap:20px;
    margin-top:10px;
}

.stat-big{
    flex:1;
    background:rgba(255,255,255,0.05);
    border:1px solid rgba(255,255,255,0.1);
    padding:15px;
    border-radius:18px;
    text-align:center;
}

.stat-title{
    font-size:12px;
    color:#aaa;
    letter-spacing:1px;
}

.stat-value{
    font-size:26px;
    font-weight:900;
    margin-top:4px;
}

.timer-zone {
    margin-top:20px;
    font-size:14px;
    color:#aaa;
}

#countdown {
    font-size:24px;
    font-weight:bold;
    margin-top:5px;
    color:white;
}

.btn-next {
    width:90%;
    border:none;
    padding:18px;
    border-radius:25px;
    font-weight:900;
    margin-top:20px;
    cursor:pointer;
    font-size:16px;
}

.btn-next:disabled {
    background:#222;
    color:#555;
    cursor:not-allowed;
}

.btn-next.active {
    animation:pulse 1s infinite;
}

@keyframes pulse {
    0% { transform:scale(1); box-shadow:0 0 10px rgba(255,255,255,0.2);}
    50% { transform:scale(1.05); box-shadow:0 0 25px rgba(255,255,255,0.5);}
    100% { transform:scale(1); box-shadow:0 0 10px rgba(255,255,255,0.2);}
}
</style>
</head>

<body>

<div id="menu">
<h1>ALIEN <span style="color:#00e5ff">PREDICTOR</span></h1>

<div class="grid">
    <div class="card" onclick="openSignal('LUCKY JET')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/luckyjet.png" class="game-img">
        <span>Lucky Jet</span>
    </div>
    <div class="card" onclick="openSignal('AVIATOR')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviator.png" class="game-img">
        <span>Aviator</span>
    </div>
    <div class="card" onclick="openSignal('ROCKET QUEEN')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/rocketqueen.png" class="game-img">
        <span>Rocket Queen</span>
    </div>
    <div class="card" onclick="openSignal('AVIATRIX')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviatrix.png" class="game-img">
        <span>Aviatrix</span>
    </div>
</div>
</div>

<div id="signal-screen">
<button onclick="goBack()" style="background:none;border:none;color:#666;font-weight:bold;">‚Üê MENU</button>
<h2 id="game-title"></h2>

<div class="main-box" id="box-style">

    <div class="play-zone">
        <div class="play-label">üïí HEURE DE JEU</div>
        <div id="play-time" class="play-time">--:--</div>
    </div>

    <div class="range-display">
        <span id="val-min">0X</span> ‚Äî <span id="val-max">0X</span>
    </div>

    <div class="stats-zone">
        <div class="stat-big">
            <div class="stat-title">PR√âCISION</div>
            <div class="stat-value"><span id="perc">--</span>%</div>
        </div>

        <div class="stat-big">
            <div class="stat-title">SIGNAL ID</div>
            <div class="stat-value">#<span id="sig-id">000</span></div>
        </div>
    </div>

    <div class="timer-zone">
        PROCHAIN SIGNAL
        <span id="countdown">--:--</span>
    </div>

</div>

<button class="btn-next" id="nextBtn" onclick="generateNew()">OBTENIR UN SIGNAL</button>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();

let currentGame="";
let timers={};

const themes = {
    "AVIATOR": {accent:"#ff0000", gold:"#ffcc00"},
    "LUCKY JET": {accent:"#9b59b6", gold:"#ffcc00"},
    "ROCKET QUEEN": {accent:"#ff69b4", gold:"#ffcc00"},
    "AVIATRIX": {accent:"#3498db", gold:"#ffcc00"}
};

function openSignal(name){
    currentGame=name;
    document.getElementById('menu').style.display='none';
    document.getElementById('signal-screen').style.display='block';
    document.getElementById('game-title').innerText=name;

    const theme=themes[name];
    document.getElementById('box-style').style.borderColor=theme.accent;
    document.getElementById('nextBtn').style.background=theme.accent;

    const saved=JSON.parse(localStorage.getItem('signal_'+name));
    if(saved) displaySavedSignal(saved);
}

function generateNew(){
    const now=Date.now();
    const saved=JSON.parse(localStorage.getItem('signal_'+currentGame));
    if(saved && now<saved.expiry){ displaySavedSignal(saved); return;}

    const isGold=Math.random()>0.8;

    let min,max;
    if(isGold){
        min=(Math.random()*2+2).toFixed(1);
        max=(Math.random()*10+5).toFixed(1);
    } else {
        // SAFE signal rules
        min=(Math.floor(Math.random()*3)+2).toFixed(1); // 2 √† 4
        max=(Math.floor(Math.random()*5)+4).toFixed(1); // 4 √† 8
    }

    const perc=Math.floor(Math.random()*19+80);
    const id=Math.floor(Math.random()*900+100);

    let start,end;
    if(isGold){
        start=new Date(now+120000); // Gold signal start
        end=new Date(now+180000);   // Gold interval
    } else {
        start=new Date(now+120000); // SAFE signal start
        end=start; // SAFE = pas d'intervalle
    }

    const data={min,max,perc,id,start:start.getTime(),end:end.getTime(),expiry:now+120000,isGold};
    localStorage.setItem('signal_'+currentGame,JSON.stringify(data));
    displaySavedSignal(data);
}

function displaySavedSignal(data){
    const theme=themes[currentGame];
    const box=document.getElementById('box-style');

    document.getElementById('val-min').innerText=data.min+"X";
    document.getElementById('val-max').innerText=data.max+"X";
    document.getElementById('perc').innerText=data.perc;
    document.getElementById('sig-id').innerText=data.id;

    if(data.isGold){
        box.classList.add('gold');
        document.getElementById('val-min').style.color=theme.gold;
        document.getElementById('val-max').style.color=theme.gold;
        document.getElementById('play-time').innerText=
            formatTime(new Date(data.start))+" ‚Äî "+formatTime(new Date(data.end));
    } else {
        box.classList.remove('gold');
        document.getElementById('val-min').style.color=theme.accent;
        document.getElementById('val-max').style.color=theme.accent;
        document.getElementById('play-time').innerText=
            formatTime(new Date(data.start)); // SAFE = juste l'heure
    }

    startTimer(currentGame, Math.max(0,Math.floor((data.expiry-Date.now())/1000)));
}

function startTimer(game,duration){
    clearInterval(timers[game]);
    const display=document.getElementById('countdown');
    const btn=document.getElementById('nextBtn');

    function tick(){
        if(currentGame!==game) return;
        if(duration<=0){
            display.textContent="SIGNAL PR√äT";
            btn.disabled=false;
            btn.classList.add('active');
            return;
        }
        let m=Math.floor(duration/60), s=duration%60;
        display.textContent=(m<10?"0"+m:m)+":"+(s<10?"0"+s:s);
        duration--;
    }

    btn.disabled=true;
    btn.classList.remove('active');
    tick();
    timers[game]=setInterval(tick,1000);
}

function formatTime(d){
    return d.getHours().toString().padStart(2,'0')+":"+d.getMinutes().toString().padStart(2,'0');
}

function goBack(){
    document.getElementById('menu').style.display='block';
    document.getElementById('signal-screen').style.display='none';
}
</script>

</body>
    </html>
