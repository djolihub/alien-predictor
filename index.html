<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alien Predictor VIP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root {
    --bg:#05070a;
    --card:#11161f;
    --gold:#ffcc00;
    --accent-lj:#8a2be2;
    --accent-av:#ff0000;
    --accent-rq:#ff69b4;
    --accent-ax:#00bfff;
}

body {
    margin:0;
    padding:15px;
    font-family:'Segoe UI',sans-serif;
    background:var(--bg);
    color:white;
    text-align:center;
}

#menu{display:block;}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:20px;}
.card{
    background:var(--card);
    border-radius:15px;
    padding:20px 10px;
    border:1px solid #222;
    cursor:pointer;
    display:flex;
    flex-direction:column;
    align-items:center;
    transition:0.2s;
}
.card:active{transform:scale(0.95);}
.game-img{width:100px;height:100px;margin-bottom:10px;object-fit:contain;}

#signal-screen{display:none;animation:fadeIn 0.4s;}
.main-box{
    background:var(--card);
    border-radius:25px;
    padding:25px 15px;
    border:2px solid var(--accent-lj);
    min-height:320px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    position:relative;
}
.main-box.is-gold{border-color:var(--gold);box-shadow:0 0 25px rgba(255,204,0,0.2);}
.signal-type{font-size:16px;font-weight:900;margin-bottom:15px;}
.type-gold{color:var(--gold);}
.type-safe{color:white;}

.range-container{text-align:center;margin:15px 0;}
.range-display{font-size:50px;font-weight:900;display:flex;justify-content:center;align-items:center;gap:15px;}
.range-sep{font-size:28px;color:#444;}
.range-labels{display:flex;justify-content:space-between;width:200px;margin-top:5px;font-size:10px;color:#555;text-transform:uppercase;letter-spacing:1px;}

.stats-row{display:flex;justify-content:space-around;width:100%;margin-top:20px;}
.stat-item{font-size:12px;background:rgba(255,255,255,0.05);padding:8px 15px;border-radius:10px;}

.timer-zone{margin-top:25px;font-size:13px;color:#888;}
#countdown{font-size:24px;font-weight:900;color:white;margin-top:5px;}

.btn-next{
    width:100%;
    padding:18px;
    border:none;
    border-radius:20px;
    font-weight:900;
    font-size:16px;
    margin-top:25px;
    cursor:pointer;
    text-transform:uppercase;
    color:black;
}
.btn-next:disabled{background:#222;color:#555;cursor:not-allowed;}

.bar-bg{
    width:80%;
    height:8px;
    background:#222;
    border-radius:10px;
    margin:20px auto 10px;
}
.bar-fill{
    height:100%;
    width:0%;
    background:var(--accent-lj);
    border-radius:10px;
    transition:1.5s;
}

@keyframes fadeIn{from{opacity:0}to{opacity:1}}
</style>
</head>
<body>

<div id="menu">
<h1>ALIEN <span style="color:var(--accent-lj)">PREDICTOR</span></h1>
<div class="grid">
    <div class="card" onclick="openSignal('LUCKY JET')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/luckyjet.png" class="game-img">
        <span>Lucky Jet</span>
    </div>
    <div class="card" onclick="openSignal('AVIATOR')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviator.png" class="game-img">
        <span>Aviator</span>
    </div>
    <div class="card" onclick="openSignal('ROCKET QUEEN')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/rocketqueen.png" class="game-img">
        <span>Rocket Queen</span>
    </div>
    <div class="card" onclick="openSignal('AVIATRIX')">
        <img src="https://raw.githubusercontent.com/djolihub/Alien-image/main/aviatrix.png" class="game-img">
        <span>Aviatrix</span>
    </div>
</div>
</div>

<div id="signal-screen">
<button onclick="goBack()" style="margin-bottom:15px;">‚Üê MENU</button>
<div class="main-box" id="box-style">
    <div id="loading-view">
        <p style="font-size:12px;">Pr√©paration du signal...</p>
        <div class="bar-bg"><div class="bar-fill" id="progress"></div></div>
    </div>
    <div id="result-view" style="display:none;">
        <div id="signal-tag" class="signal-type">SIGNAL</div>
        <div class="time-interval" id="play-time">--:--</div>
        <div class="range-container">
            <div class="range-display">
                <span id="val-min">0X</span>
                <span class="range-sep">‚Äî</span>
                <span id="val-max">0X</span>
            </div>
            <div class="range-labels">
                <span>Minima</span>
                <span>Objectif</span>
            </div>
        </div>
        <div class="stats-row">
            <div class="stat-item">PR√âCISION: <span id="perc">--</span>%</div>
            <div class="stat-item">ID: #<span id="sig-id">000</span></div>
        </div>
        <div class="timer-zone">
            PROCHAIN SIGNAL DANS
            <span id="countdown">--:--</span>
        </div>
    </div>
</div>
<button class="btn-next" id="nextBtn" onclick="generateNew()">OBTENIR UN SIGNAL</button>
</div>

<script>
const tg=window.Telegram.WebApp;
tg.expand();

let currentGame="";
let timers={};
let gameAccents={
    "LUCKY JET":"var(--accent-lj)",
    "AVIATOR":"var(--accent-av)",
    "ROCKET QUEEN":"var(--accent-rq)",
    "AVIATRIX":"var(--accent-ax)"
};

function openSignal(game){
    currentGame=game;
    document.getElementById('menu').style.display='none';
    document.getElementById('signal-screen').style.display='block';

    let accent=gameAccents[game];
    document.getElementById('box-style').style.borderColor=accent;
    document.getElementById('nextBtn').style.background=accent;

    const saved=JSON.parse(localStorage.getItem("signal_"+game));
    if(saved && Date.now()<saved.expiry){
        startTimer(game,saved.expiry);
        document.getElementById('nextBtn').disabled=true;
    }
    resetSignalDisplay();
}

function resetSignalDisplay(){
    document.getElementById('loading-view').style.display='none';
    document.getElementById('result-view').style.display='block';
    document.getElementById('val-min').innerText="0X";
    document.getElementById('val-max').innerText="0X";
    document.getElementById('perc').innerText="--";
    document.getElementById('sig-id').innerText="000";
    document.getElementById('play-time').innerText="--:--";
    document.getElementById('countdown').innerText="--:--";
    document.getElementById('nextBtn').disabled=false;
}

function generateNew(){
    document.getElementById('loading-view').style.display='block';
    document.getElementById('result-view').style.display='none';
    document.getElementById('progress').style.width='0%';

    setTimeout(()=>{document.getElementById('progress').style.width='100%';},100);

    setTimeout(()=>{
        const now=new Date();
        const isGold=Math.random()>0.8;
        let c1,c2,perc;
        if(isGold){
            c1=Math.random()*(9-6)+6;
            c2=Math.random()*(20-10)+10;
            perc=Math.floor(Math.random()*(88-76)+76);
        } else {
            c1=Math.random()*(2.5-2)+2;
            c2=Math.random()*(5-3)+3;
            perc=Math.floor(Math.random()*(98-80)+80);
        }

        const min=Math.min(c1,c2).toFixed(1);
        const max=Math.max(c1,c2).toFixed(1);
        const id=Math.floor(Math.random()*899+100);
        const startT=new Date(now.getTime()+2*60000);
        const endT=new Date(now.getTime()+3*60000);
        const timeStr=startT.getHours().toString().padStart(2,'0')+":"+startT.getMinutes().toString().padStart(2,'0')+" ‚Äî "+
                      endT.getHours().toString().padStart(2,'0')+":"+endT.getMinutes().toString().padStart(2,'0');

        const expiry=Date.now()+120*1000;
        localStorage.setItem("signal_"+currentGame,JSON.stringify({expiry:expiry}));

        document.getElementById('val-min').innerText=min+"X";
        document.getElementById('val-max').innerText=max+"X";
        document.getElementById('perc').innerText=perc;
        document.getElementById('sig-id').innerText=id;
        document.getElementById('play-time').innerText=timeStr;

        const box=document.getElementById('box-style');
        const tag=document.getElementById('signal-tag');
        if(isGold){
            tag.innerText="‚≠ê SIGNAL GOLD ‚≠ê";
            tag.className="signal-type type-gold";
            box.classList.add('is-gold');
            document.getElementById('val-min').style.color="var(--gold)";
            document.getElementById('val-max').style.color="var(--gold)";
        } else {
            tag.innerText="üõ°Ô∏è SIGNAL SAFE üõ°Ô∏è";
            tag.className="signal-type type-safe";
            box.classList.remove('is-gold');
            document.getElementById('val-min').style.color="white";
            document.getElementById('val-max').style.color="white";
        }

        document.getElementById('loading-view').style.display='none';
        document.getElementById('result-view').style.display='block';
        document.getElementById('nextBtn').disabled=true;
        startTimer(currentGame,expiry);
    },1800);
}

function startTimer(game,expiry){
    if(timers[game]) clearInterval(timers[game]);
    timers[game]=setInterval(()=>{
        const diff=Math.floor((expiry-Date.now())/1000);
        if(diff<=0){
            clearInterval(timers[game]);
            document.getElementById('nextBtn').disabled=false;
            document.getElementById('countdown').innerText="SIGNAL PR√äT !";
        } else {
            let m=Math.floor(diff/60);
            let s=diff%60;
            document.getElementById('countdown').innerText=(m<10?"0"+m:m)+":"+(s<10?"0"+s:s);
        }
    },1000);
}

function goBack(){
    document.getElementById('menu').style.display='block';
    document.getElementById('signal-screen').style.display='none';
}
</script>

</body>
</html>
